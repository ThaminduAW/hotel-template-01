<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Management | Azure Horizon Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#cca43b',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .kanban-col {
            min-height: 500px;
        }

        .draggable-card {
            cursor: grab;
        }

        .draggable-card:active {
            cursor: grabbing;
        }

        .dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        /* Custom drop zone highlight */
        .drag-over {
            background-color: #f1f5f9;
            border-radius: 0.75rem;
            border: 2px dashed #cbd5e1;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans text-slate-800">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-primary text-slate-300 flex-shrink-0 hidden md:flex flex-col transition-all duration-300">
            <div class="h-16 flex items-center justify-center border-b border-white/10">
                <a href="../index.html" class="text-xl font-serif font-bold text-white tracking-wide">Azure Admin</a>
            </div>
            <nav class="flex-1 overflow-y-auto py-6 space-y-1">
                <a href="dashboard.html"
                    class="flex items-center px-6 py-3 hover:bg-white/5 hover:text-white transition">
                    <i class="fas fa-chart-line w-6"></i>
                    <span class="font-medium">Dashboard</span>
                </a>
                <a href="reservations.html"
                    class="flex items-center px-6 py-3 hover:bg-white/5 hover:text-white transition">
                    <i class="fas fa-calendar-check w-6"></i>
                    <span class="font-medium">Reservations</span>
                </a>
                <a href="room-management.html"
                    class="flex items-center px-6 py-3 bg-secondary/10 text-secondary border-r-4 border-secondary transition">
                    <i class="fas fa-bed w-6"></i>
                    <span class="font-medium">Rooms</span>
                </a>
                <!-- Other links -->
            </nav>
        </aside>

        <!-- Main -->
        <main class="flex-1 flex flex-col h-screen overflow-hidden">
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 z-10">
                <div class="flex items-center gap-4">
                    <button class="md:hidden text-gray-500 hover:text-primary"><i
                            class="fas fa-bars text-xl"></i></button>
                    <h1 class="text-xl font-bold text-slate-800">Room Status Board</h1>
                </div>
                <button
                    class="bg-primary hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-medium transition shadow-sm">
                    <i class="fas fa-plus mr-2"></i> Add Room
                </button>
            </header>

            <div class="flex-1 overflow-x-auto overflow-y-hidden p-6 bg-slate-50">
                <div class="flex gap-6 h-full min-w-[1000px]">

                    <!-- Col 1: Available -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 h-full">
                        <div
                            class="p-4 border-b border-slate-100 flex justify-between items-center bg-green-50 rounded-t-xl">
                            <h3 class="font-bold text-green-800 flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-green-500"></div> Available
                            </h3>
                            <span class="bg-white px-2 py-0.5 rounded text-xs font-bold text-green-700 shadow-sm"
                                id="count-available">0</span>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-3 kanban-col" id="col-available"
                            ondrop="drop(event)" ondragover="allowDrop(event)" data-status="Available">
                            <!-- Cards -->
                        </div>
                    </div>

                    <!-- Col 2: Booked -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 h-full">
                        <div
                            class="p-4 border-b border-slate-100 flex justify-between items-center bg-blue-50 rounded-t-xl">
                            <h3 class="font-bold text-blue-800 flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-blue-500"></div> Booked
                            </h3>
                            <span class="bg-white px-2 py-0.5 rounded text-xs font-bold text-blue-700 shadow-sm"
                                id="count-booked">0</span>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-3 kanban-col" id="col-booked"
                            ondrop="drop(event)" ondragover="allowDrop(event)" data-status="Booked">
                            <!-- Cards -->
                        </div>
                    </div>

                    <!-- Col 3: Cleaning -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 h-full">
                        <div
                            class="p-4 border-b border-slate-100 flex justify-between items-center bg-yellow-50 rounded-t-xl">
                            <h3 class="font-bold text-yellow-800 flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-yellow-500"></div> Cleaning
                            </h3>
                            <span class="bg-white px-2 py-0.5 rounded text-xs font-bold text-yellow-700 shadow-sm"
                                id="count-cleaning">0</span>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-3 kanban-col" id="col-cleaning"
                            ondrop="drop(event)" ondragover="allowDrop(event)" data-status="Cleaning">
                            <!-- Cards -->
                        </div>
                    </div>

                    <!-- Col 4: Maintenance -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl shadow-sm border border-slate-200 h-full">
                        <div
                            class="p-4 border-b border-slate-100 flex justify-between items-center bg-red-50 rounded-t-xl">
                            <h3 class="font-bold text-red-800 flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-red-500"></div> Maintenance
                            </h3>
                            <span class="bg-white px-2 py-0.5 rounded text-xs font-bold text-red-700 shadow-sm"
                                id="count-maintenance">0</span>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-3 kanban-col" id="col-maintenance"
                            ondrop="drop(event)" ondragover="allowDrop(event)" data-status="Maintenance">
                            <!-- Cards -->
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script src="../js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            hotelData.rooms.forEach(room => {
                createCard(room);
            });
            updateCounts();
        });

        function createCard(room) {
            const colId = `col-${room.status.toLowerCase()}`;
            const col = document.getElementById(colId);
            if (!col) return; // Fallback or logic error

            const card = document.createElement('div');
            card.className = 'bg-white p-4 rounded-lg shadow-sm border border-slate-200 draggable-card hover:shadow-md transition relative group';
            card.draggable = true;
            card.id = `room-${room.id}`;
            card.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <span class="font-bold text-lg text-slate-700">${room.id}</span>
                     <button class="text-slate-300 hover:text-slate-500"><i class="fas fa-ellipsis-v"></i></button>
                </div>
                <div class="text-sm font-medium text-slate-600 mb-1">${room.type}</div>
                <div class="flex justify-between items-center mt-3">
                     <span class="text-xs text-slate-400">Floor ${room.floor}</span>
                     <div class="flex -space-x-2">
                         <!-- Avatar Placeholder if occupied -->
                         ${room.status === 'Booked' ? '<div class="w-6 h-6 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-[10px] text-blue-600 font-bold">JD</div>' : ''}
                     </div>
                </div>
                <div class="absolute inset-0 bg-white/50 hidden group-hover:flex items-center justify-center gap-2 backdrop-blur-[1px] opacity-0 group-hover:opacity-100 transition">
                    <button class="bg-white p-2 rounded-full shadow text-blue-500 hover:text-blue-600"><i class="fas fa-edit"></i></button>
                    <button class="bg-white p-2 rounded-full shadow text-red-500 hover:text-red-600"><i class="fas fa-trash"></i></button>
                </div>
            `;

            // Drag Events
            card.addEventListener('dragstart', drag);

            col.appendChild(card);
        }

        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        // Remove highlight on dragleave
        document.querySelectorAll('.kanban-col').forEach(col => {
            col.addEventListener('dragleave', (e) => {
                e.currentTarget.classList.remove('drag-over');
            });
        });

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const card = document.getElementById(data);
            const targetCol = ev.currentTarget; // The column div

            if (targetCol.classList.contains('kanban-col')) {
                targetCol.appendChild(card);
                card.classList.remove('dragging');

                // Update Logic (Mock)
                const newStatus = targetCol.dataset.status;
                // Ideally update hotelData here

                // Visual feedback
                targetCol.classList.remove('drag-over');
                updateCounts();
            }
        }

        function updateCounts() {
            ['available', 'booked', 'cleaning', 'maintenance'].forEach(status => {
                const count = document.getElementById(`col-${status}`).children.length;
                document.getElementById(`count-${status}`).innerText = count;
            });
        }
    </script>
</body>

</html>